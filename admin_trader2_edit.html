<!DOCTYPE html>
<html lang="zh-tw">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

	<!--css-->
	<link href="css/bootstrap.css" rel="stylesheet">
	<link href="css/global.css" rel="stylesheet">
	<link href="https://unpkg.com/element-ui/lib/theme-default/index.css" rel="stylesheet">
	<link href="css/semantic.css" rel="stylesheet">
	<link href="css/admin.css" rel="stylesheet">

	<!--vue-->
	<script src="js/vue.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/axios.js"></script>
	<script src="js/semantic.js"></script>
	<script src="https://unpkg.com/element-ui/lib/index.js"></script>
</head>
<body class="season2">
<div id="vue">

<div class="ui top attached tabular menu">
  <a @click="tab = 'info'" :class="{active: tab == 'info'}" class="item">資訊</a>
  <a @click="tab = 'reports'" :class="{active: tab == 'reports'}" class="item">解說</a>
  <a @click="tab = 'records'" :class="{active: tab == 'records'}" class="item">紀錄</a>
  <a @click="tab = 'markets'" :class="{active: tab == 'markets'}" class="item">市場</a>
  <button @click="save" class="ui primary button right">儲存</button>
</div>

<div v-if="tab == 'info'">
  姓名：<input v-model="name" class="big">
  照片：<input v-model="image" class="big">
  <img :src="image" style="width: 200px; margin: 2px"><br>
  策略：<el-input type="textarea" autosize placeholder="請輸入策略內容" v-model="strategy"></el-input>
  預覽：<div v-html="strategy" class="block"></div>
  臉書：<input v-model="facebook" class="big">
  訪談：<el-input type="textarea" autosize placeholder="請輸入訪談內容" v-model="interview"></el-input>
  預覽：<div v-html="interview" class="block"></div>
  歷史：
  <div v-for="(h, i) in history" class="list">
    <button @click="history.splice(i, 1)" class="right">刪除</button>
    <span class="nowrap">賽季：<input v-model="history[i].season"></span>
    <span class="nowrap">獎項：<input v-model="history[i].prize"></span>
    <span class="nowrap">排名：<input v-model="history[i].rank"></span>
    <span class="nowrap">平均：<input v-model="history[i].average"></span>
    <span class="nowrap">投報：<input v-model="history[i].rate"></span>
    <span class="nowrap">總分：<input v-model="history[i].score"></span>
  </div>
  <button @click="history.push({season: '', prize: '', rank: '', average: '', rate: '', score: ''})">新增</button>
</div>

<div v-if="tab == 'reports'">
  <div v-for="(r, i) in reports" class="list">
    <button @click="reports.splice(i, 1)" class="right">刪除</button>
    日期：<input v-model="reports[i].date"><br>
    理由：<el-input type="textarea" autosize placeholder="請輸入理由" v-model="reports[i].reason"></el-input>
    預覽：<div v-html="r.reason" class="block"></div>
    圖片：<ul><li v-for="(img, i) in r.images"><input v-model="r.images[i]" class="big"><img :src="img" style="width: 400px; margin: 2px"><br></li></ul>
    <button @click="r.images.push('')">+1</button><button @click="r.images.pop()">-1</button>
  </div>
  <button @click="reports.push({date: '', reason: '', images: ['']})">新增</button>
</div>

<div v-if="tab == 'records'">
  <div v-for="(r, i) in records" class="list">
    <button @click="records.splice(i, 1)" class="right">刪除</button>
    <span class="nowrap">日期：<input v-model="records[i].date"></span>
    <span class="nowrap">名稱：<input v-model="records[i].name"></span>
    <span class="nowrap">類型：<select v-model="records[i].type"><option>買</option><option>賣</option><option>原始持有</option></select></span>
    <span class="nowrap">股數：<input v-model.number="records[i].share"></span>
    <span class="nowrap">價錢：<input v-model.number="records[i].price"></span>
    <span class="nowrap">總價：<input v-model.number="records[i].total"></span>
  </div>
  <button @click="records.push({date: '', name: '', type: '', share: 0, price: 0, total: 0})">新增</button>
</div>

<div v-if="tab == 'markets'">
  <div v-for="(m, i) in markets" class="list">
    <button @click="markets.splice(i, 1)" class="right">刪除</button>
    日期：<input v-model="markets[i].date"><br>
    觀察：<el-input type="textarea" autosize placeholder="請輸入觀察結果" v-model="markets[i].info"></el-input>
    預覽：<div v-html="m.info" class="block"></div>
  </div>
  <button @click="markets.push({date: '', info: ''})">新增</button>
</div>

</div>


<script>

var data = {
  tab: 'info',
  id: 0,
  image: '',
  name: '',
  strategy: '',
  facebook: '',
  interview: '',
  records: [],
  reports: [],
  comments5: [],
  comments6: [],
  history: [],
  markets: [],
};

//data//

var vue = new Vue({el: '#vue', data: data, methods: {
  save: function () {
    var x = this.$data;
    delete x.tab;
    axios.post('admin_trader2_save', x).then(function() {
      //location.href = 'admin_trader2';
      location.reload();
    });
  }
}});

</script>

</body>
</html>
